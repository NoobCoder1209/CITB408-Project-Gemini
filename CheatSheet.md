# Презентация и анализ: Java симулатор на печатница

## 1\. Общ преглед на проекта: „Еlevator Pitch“

  * **Какво представлява проектът?**  
    Това е „дигитален близнак“ на реална печатница, изграден изцяло на Java. Не е просто база данни за съхранение на информация, а **симулатор на бизнес операции**. Моделира взаимосвързаните процеси на производство, финанси, инвентар и човешки ресурси.

  * **Каква е основната цел?**  
    Да моделира и изпълнява *бизнес логиката* и *финансовите изчисления* на предприятието. Системата отговаря на въпроси като:
      * Какви са общите приходи и разходи на печатницата?
      * Ако приходите достигнат 10 000 лв., как това влияе автоматично върху заплатите на мениджърите?
      * Може ли „Machine-01“ да отпечата 5000 копия на книга формат А4 с наличната хартия и при дадените настройки (черно-бяло/цветно)?
      * Каква е правилната продажна цена за голяма поръчка от 1500 плаката с приложена отстъпка за обем?

  * **Технологичен стек:**  
    Основава се на **Java 17**.

      * **Build Tool:** Apache **Maven** — управление на структурата, зависимостите и жизнения цикъл на проекта.  
      * **Език:** Java 17, използваща съвременни възможности като `record` типове (`Paper`) и `Map.of()`.  
      * **Зависимости:** Единствената външна библиотека е **JUnit 5**. Фокусът е върху чист обектно-ориентиран дизайн без допълнителни рамки като Spring.

-----

## 2\. Архитектура: „Защо“ е структурирана така

Проектът следва принципа **Separation of Concerns (SoC)** – всяка част има ясно определена отговорност.

  * `model/` (Съществителните – „Данните“)
      * **Предназначение:** Моделират същностите на бизнеса — служители, публикации, машини, хартия.
      * **Ключов принцип:** Тези класове съхраняват *състояние*, но не съдържат сложна логика.  
        Пример: `Publication` знае колко страници има, но не изчислява цената си.
      * **Подпакети:** `employee/`, `publication/`, `paper/`, `machine/`.

  * `service/` (Глаголите – „Мозъкът“)
      * **Предназначение:** Тук се намира бизнес логиката. Класовете са статични и оперират върху моделите.  
      * **`PricingService`:** Определя цената на хартията. Напълно независим от модела `Paper`.  
      * **`FileService`:** Отговаря за вход/изход и работа с файлове (запис и четене на отчети).

  * `exception/` (Правилата)
      * **Предназначение:** Дефинирани са собствени, проверявани изключения за бизнес грешки.  
      * **Причина:** `NotEnoughPaperException` е по-информативно и надеждно от `null` или `false`.

  * `Main.java` (Симулаторът)
      * **Предназначение:** Главен „драйвер“ на приложението — изпълнява симулация на работния процес и демонстрира взаимодействието между компонентите.

-----

## 3\. Ключови компоненти: „Как“ работи системата

### A. Йерархията на служителите (Полиморфизъм)

  * **Абстракция:** `abstract class Employee` дефинира метод `calculateSalary()`.  
  * **Имплементации:**
      * `Operator` връща основна заплата.
      * `Manager` има допълнителен метод `calculateSalary(revenue, threshold)` с бонус логика.  
  * **Полиморфизъм:**  
    В `PrintingHouse.calculateTotalExpenses()` имаме един универсален цикъл:
    ```java
    for (Employee emp : employees) {
        if (emp instanceof Manager manager) {
            totalSalaries = totalSalaries.add(manager.calculateSalary(...));
        } else {
            totalSalaries = totalSalaries.add(emp.calculateSalary());
        }
    }
    ```
    Всеки служител се обработва еднакво, но се извиква правилният метод според типа.  
    Това следва принципа **Open-Closed** – системата е отворена за разширяване, но затворена за модификации.

### B. Класът `PrintingMachine` (Състояние и изключения)

  * **Състояние:** Съдържа текущо количество хартия и тип заредена хартия.  
  * **Метод `printPublication()`:**  
    1. Проверява дали машината поддържа цвят.  
    2. Проверява дали заредената хартия съвпада с размера.  
    3. Проверява дали има достатъчно хартия.  
  * **Резултат:** Предотвратява неконсистентни данни и осигурява предвидимо поведение.

### C. Класът `PrintingHouse` (Шаблон „Facade“)

  * **Предназначение:** Предоставя единен интерфейс към сложна система.  
  * **Пример:** `Main` извиква само `house.calculateTotalExpenses()`, без да знае за бонуси, служители или цени на хартия.  
  * **Предимство:** Централизация и опростеност – външният код общува само с един обект.

-----

## 4\. Технически възможности: Вход/изход и съхранение на данни

### A. Текстови отчети

  * **Изпълнение:** `saveReport()` и `loadReport()` използват `BufferedWriter` и `BufferedReader`.  
  * **Предимства:** Човешки четим формат, лесен за проверка.  
  * **Недостатъци:** Форматно зависим – промяна в текста може да счупи парсера.  
  * **Приложение:** Финансови отчети, логове, отчети за продажби.

### B. Сериализация на обекти

  * **Изпълнение:** `saveEmployees()` и `loadEmployees()` чрез `ObjectOutputStream` и `ObjectInputStream`.  
  * **Предимства:** Съхранява пълното състояние на обектите (тип, данни).  
  * **Недостатъци:** Бинарен формат; несъвместимост при промяна на класове.  
  * **Приложение:** Запазване на състоянието на приложението за възстановяване по-късно.

-----

## 5\. Изпълнение на проекта: Maven Lifecycle

1. **`mvn compile`** – компилира изходния код, проверява за синтактични грешки.  
2. **`mvn test`** – стартира всички JUnit тестове и проверява коректността на бизнес логиката.  
3. **`mvn exec:java -Dexec.mainClass="com.printinghouse.Main"`** – стартира симулацията, извежда резултати в конзолата и генерира `financial_report.txt`.  
4. **`mvn package`** – създава `.jar` файл (напр. `printing-house-project-1.0.0.jar`), готов за разпространение.

-----
